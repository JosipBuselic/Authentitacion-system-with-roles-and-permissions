(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[722],{820:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var a=t(5155),l=t(2115);t(3683);var r=t(5695);function n(){let e=(0,r.useRouter)(),[s,t]=(0,l.useState)([]),[n,c]=(0,l.useState)(!0),[i,d]=(0,l.useState)(null);(0,l.useEffect)(()=>{u()},[]);let o=async()=>{let s=await fetch("/clear-session",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});"true"===(await s.json()).success?e.replace("/"):alert("Something went wrong")},u=async()=>{c(!0);try{let e=await fetch("/admin",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"}),s=await e.json();t(s)}catch(e){console.error(e)}finally{c(!1)}},x=async()=>{i&&((await fetch("/admin/update-user",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(i)})).ok?(d(null),u()):alert("Failed to update user"))};return(0,a.jsxs)("div",{className:"min-h-screen p-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center text-blue-600 py-2 px-2 bg-white rounded-xl",children:"Admin Dashboard"}),(0,a.jsx)("button",{onClick:o,className:"mb-3 px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition cursor-pointer",children:"Logout"}),n?(0,a.jsx)("p",{className:"text-center",children:"Loading users..."}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full bg-white shadow-md rounded-lg",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-gray-200 text-gray-700",children:[(0,a.jsx)("th",{className:"py-3 px-4 text-left",children:"ID"}),(0,a.jsx)("th",{className:"py-3 px-4 text-left",children:"Username"}),(0,a.jsx)("th",{className:"py-3 px-4 text-left",children:"Email"}),(0,a.jsx)("th",{className:"py-3 px-4 text-left",children:"Role ID"}),(0,a.jsx)("th",{className:"py-3 px-4",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:s.map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"py-3 px-4",children:e.id}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.username}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.email}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.roleid}),(0,a.jsx)("td",{className:"py-3 px-4 text-center",children:(0,a.jsx)("button",{className:"bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 cursor-pointer",onClick:()=>d(e),children:"Edit"})})]},e.id))})]})}),i&&(0,a.jsx)("div",{className:"fixed inset-0 bg-opacity-40 flex justify-center items-center bg-blue-500",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-96",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit User"}),(0,a.jsx)("label",{className:"block mb-2",children:"Username"}),(0,a.jsx)("input",{className:"border px-3 py-2 w-full mb-4",value:i.username,onChange:e=>d({...i,username:e.target.value})}),(0,a.jsx)("label",{className:"block mb-2",children:"Email"}),(0,a.jsx)("input",{className:"border px-3 py-2 w-full mb-4",value:i.email,onChange:e=>d({...i,email:e.target.value})}),(0,a.jsx)("label",{className:"block mb-2",children:"Role ID"}),(0,a.jsx)("input",{type:"number",className:"border px-3 py-2 w-full mb-4",value:i.roleid,onChange:e=>d({...i,roleid:Number(e.target.value)})}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{className:"bg-gray-400 px-4 py-2 rounded hover:bg-gray-500 cursor-pointer",onClick:()=>d(null),children:"Cancel"}),(0,a.jsx)("button",{className:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 cursor-pointer",onClick:x,children:"Save"})]})]})})]})}},3683:()=>{},5695:(e,s,t)=>{"use strict";var a=t(8999);t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},9415:(e,s,t)=>{Promise.resolve().then(t.bind(t,820))}},e=>{e.O(0,[290,441,964,358],()=>e(e.s=9415)),_N_E=e.O()}]);